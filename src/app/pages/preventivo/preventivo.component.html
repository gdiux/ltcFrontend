<!-- CHECKIN - CHECKOUT -->
<div class="d-flex align-item-center flex-wrap gap-2 mb-3 w-md-50">

    <button (click)="updateCheck('checkin')" [disabled]="preventive?.checkin" type="button " class="card mt-2 mb-0 bg-success p-3 text-white pointer">
        <div class="">
            <h4 class="mb-0 text-white fw-bold text-left "> 
                <i class="mdi mdi-airplane-landing"></i>
                CheckIn 
            </h4>
            <footer>
                <small *ngIf="preventive?.checkin">
                    {{ preventive?.checkin | date: 'medium' }}
                </small>
                <small *ngIf="!preventive?.checkin">
                    click aqui para checkIn
                </small>
            </footer>
        </div>
    </button>

    <button (click)="updateCheck('checkout')" [disabled]="preventive?.checkout" *ngIf="preventive?.checkin" type="button " class="card mt-2 mb-0 bg-danger p-3 text-white pointer">
        <div class="">
            <h4 class="mb-0 text-white fw-bold text-left">
                <i class="mdi mdi-airplane-takeoff"></i>
                CheckOut 
            </h4>
            <footer>
                <small *ngIf="preventive?.checkout">
                    {{ preventive?.checkout | date: 'medium' }}
                </small>
                <small *ngIf="!preventive?.checkout">
                    click aqui para checkOut
                </small>
            </footer>
        </div>
    </button>

</div>
<!-- CHECKIN - CHECKOUT -->
<hr>
<!-- CONTROL - CLIENT -->
<div class="d-flex align-item-center flex-wrap gap-2 mb-3">

    <!-- CONTROL -->
    <div class="d-flex flex-row bg-white pl-0 pr-3 shadow-sm mt-2">
        <div class="p-10 bg-info">
            <h3 class="text-white box m-b-0 fs-3 fw-bold">
                {{ preventive?.control | number }}
            </h3>
        </div>
        <div class="align-self-center m-l-20">
            <h3 class="m-b-0 text-info"> Control </h3>
            <small *ngIf="preventive?.estado === 'Pendiente' " class="text-warning m-b-0">
                {{ preventive?.estado }}
            </small>
            <small *ngIf="preventive?.estado === 'Terminado' " class="text-success m-b-0">
                {{ preventive?.estado }}
            </small>
        </div>
    </div>

    <!-- CLIENT -->
    <div class="d-flex flex-row bg-white pl-0 shadow-sm mt-2">
        <div class="p-10 bg-primary">
            <h3 class="text-white box m-b-0">
                <i class=" mdi mdi-account-outline fs-2"></i>
            </h3>
        </div>
        <div class="align-self-center m-l-20 pr-3">
            <h4 class="m-b-0 text-primary text-break"> {{preventive?.client.name}} </h4>
            <small class="text-muted m-b-0">
                <i class="mdi mdi-phone"></i>
                {{ preventive?.client.phone }}
            </small>
            <small class="text-muted m-b-0">
                - <i class="mdi mdi-map-marker"></i>
                {{ preventive?.client.address }}
            </small>

        </div>
    </div>

</div>
<!-- CONTROL - CLIENT -->

<div class="d-flex flex-row flex-wrap gap-2">

    <!-- INFO PRODUCT -->
    <div class="card w-100">
        <div class="card-body">

            <div class="d-flex flex-row flex-wrap gap-2 mb-3">

                <div class="col-md-4">
                    <img [src]="preventive?.product.img | imagen: 'products' " alt="image" class="img-responsive img-rounded" width="150">
                </div>

                <div>
                    <p class="mb-2 fw-bolder text-info">PRODUCTO:</p>
                    <h3 class="mb-2 fw-bold fs-2">Serial: {{ preventive?.product.serial }} </h3>
                    <button type="button" class="btn waves-effect waves-light btn-rounded btn-sm btn-outline-primary">Proximo mantenimiento</button>
                </div>

            </div>

            <div class="row">

                <div class="col-md-3 col-xs-6 b-r"> <strong class="fw-bold">Codigo</strong>
                    <br>
                    <p class="text-muted">{{ preventive?.product.code }}</p>
                </div>

                <div class="col-md-3 col-xs-6 b-r"> <strong class="fw-bold">Marca</strong>
                    <br>
                    <p class="text-muted"> {{ preventive?.product.brand }} </p>
                </div>

                <div class="col-md-3 col-xs-6 b-r"> <strong class="fw-bold">Modelo</strong>
                    <br>
                    <p class="text-muted"> {{ preventive?.product.model }} </p>
                </div>

                <div class="col-md-3 col-xs-6"> <strong class="fw-bold">AÃ±o</strong>
                    <br>
                    <p class="text-muted"> {{ preventive?.product.year }} </p>
                </div>
            </div>

        </div>
    </div>
    <!-- INFO PRODUCT -->

    <!-- INFO STAFF -->
    <div class="card ml-auto">

        <div class="card-body little-profile text-center">
            <div class="pro-img m-t-20"><img class="shadow" [src]="preventive?.staff.img | imagen:'user'" alt="user"></div>
            <h3 class="m-b-0"> {{ preventive?.staff.name }} </h3>
            <h6 class="text-muted"> {{ preventive?.staff.role }} </h6>
        </div>

    </div>
    <!-- INFO STAFF -->

</div>

<!-- INFORMACION DEL MANTENIMIENTO -->
<div class="card">
    <div class="card-body">
        <h4 class="card-title"><span class="lstick"></span>Informe Tecnico</h4>
    </div>
    <!-- ============================================================== -->
    <!-- Comment widgets -->
    <!-- ============================================================== -->
    <div class="comment-widgets">

        <!-- Comment Row -->
        <div class="d-flex flex-row comment-row" *ngFor="let nota of preventive?.notes">
            <div class="p-2">
                <span class="round">
                    <img [src]="nota.staff.img | imagen: 'user'" alt="user" width="50">
                </span>
            </div>
            <div class="comment-text w-100">
                <h5> {{ nota.staff.name }} </h5>
                <p class="m-b-5 text-break">
                    {{ nota.note }}
                </p>
                <div class="comment-footer">
                    <span class="text-muted pull-right"> {{ nota.date | date: 'medium' }} </span>
                    <span class="action-icons active">
                        <a href="javascript:void(0)"><i class="icon-close"></i></a> 
                    </span>
                </div>
            </div>
        </div>
        <!-- Comment Row -->

        <!-- ENVIAR COMENTARIO -->
        <form autocomplete="off" [formGroup]="formNotes" (ngSubmit)="postNota()">
            <div class="card-body b-t">
                <div class="row">
                    <div class="col-8">
                        <textarea formControlName="note" placeholder="Escribe el informe tecnico" class="form-control b-0" #notaI></textarea>
                        <div *ngIf="validate('note')" class="form-control-feedback animated fadeIn text-danger">
                            <small>** Campo de mensaje vacio </small>
                        </div>
                    </div>
                    <div class="col-4 text-right">
                        <button type="submit" class="btn btn-info btn-circle btn-lg"><i class="fa fa-paper-plane-o"></i> </button>
                    </div>
                </div>
            </div>
        </form>
        <!-- ENVIAR COMENTARIO -->

    </div>
    <!-- INFORMACION DEL MANTENIMIENTO -->